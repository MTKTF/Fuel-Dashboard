<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fuel Transactions</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="data.js?v=123"></script>
</head>
<body>
    <h1>Fuel Transactions</h1>

    <nav>
        <button onclick="window.location.href='index.html'">🏠 Home</button>
        <button onclick="window.location.href='report.html'">📊 Reports</button>
    </nav>

    <canvas id="fuelChart"></canvas>

    <table>
        <thead>
            <tr>
                <th>Keyfob ID</th>
                <th>Fuel Pumped (L)</th>
                <th>Timestamp</th>
            </tr>
        </thead>
        <tbody id="fuel-log"></tbody>
    </table>

    <script>
        function fetchFuelData() {
            const data = getDummyData();
            const timestamps = data.map(entry => entry.timestamp);
            const fuelAmounts = data.map(entry => entry.fuel_pumped);
            
            new Chart(document.getElementById('fuelChart').getContext('2d'), {
                type: 'bar',
                data: { labels: timestamps, datasets: [{ label: 'Fuel Pumped (L)', data: fuelAmounts, backgroundColor: 'blue' }] },
                options: { responsive: true }
            });

            document.getElementById('fuel-log').innerHTML = data.map(entry => 
                `<tr><td>${entry.keyfob_id}</td><td>${entry.fuel_pumped} L</td><td>${entry.timestamp}</td></tr>`
            ).join('');
        }

        window.onload = fetchFuelData;
    </script>
</body>
</html>
